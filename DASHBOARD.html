<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Sovereign Dashboard | ŸÖÿ±ŸÉÿ≤ ÿßŸÑŸÇŸäÿßÿØÿ©</title>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@700&display=swap" rel="stylesheet">
    <style>
        body { background: #050505; color: #0f0; font-family: 'JetBrains Mono', monospace; padding: 2rem; margin: 0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .panel { border: 1px solid #333; padding: 20px; background: #000; position: relative; }
        .panel h2 { margin-top: 0; color: #ce0000; border-bottom: 1px solid #333; padding-bottom: 10px; }
        .status-dot { height: 15px; width: 15px; background-color: #0f0; border-radius: 50%; display: inline-block; box-shadow: 0 0 10px #0f0; }
        .offline { background-color: #555; box-shadow: none; }
        iframe { width: 100%; height: 200px; border: none; }
    </style>
</head>
<body>
    <h1 style="color:#fff;text-align:center;border-bottom:2px solid #ce0000;padding-bottom:1rem;">ü¶Ö SOVEREIGN COMMAND CENTER</h1>
    
    <div class="grid">
        <div class="panel">
            <h2>üì° SYSTEM STATUS</h2>
            <p>APACHE SERVER: <span class="status-dot"></span> ONLINE</p>
            <p>BRAIN CORE (5000): <span class="status-dot" id="brainStat"></span> <span id="brainTxt">CHECKING...</span></p>
            <p>PORT 80: OPEN</p>
        </div>

        <div class="panel">
            <h2>üß† NEURAL LINK</h2>
            <input type="text" id="cmd" placeholder="Command the Brain..." style="width:100%;background:#111;color:#fff;border:1px solid #444;padding:10px;">
            <div id="resp" style="margin-top:10px;color:#ce0000;">Waiting for input...</div>
        </div>

        <div class="panel">
            <h2>üåç GLOBAL TRAFFIC</h2>
            <p>VISITORS: <strong id="vCount">Loading...</strong></p>
            <p>TARGET: SILICON VALLEY</p>
        </div>
    </div>

    <script>
        // Check Brain Status
        fetch('http://localhost:5000/api/chat', {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:'ping'})})
        .then(() => { 
            document.getElementById('brainStat').style.backgroundColor = '#0f0';
            document.getElementById('brainStat').style.boxShadow = '0 0 10px #0f0';
            document.getElementById('brainTxt').innerText = 'ACTIVE';
        })
        .catch(() => {
            document.getElementById('brainStat').className = 'status-dot offline';
            document.getElementById('brainTxt').innerText = 'OFFLINE (Run brain.py)';
            document.getElementById('brainTxt').style.color = '#555';
        });

        // Visitor Count
        document.getElementById('vCount').innerText = localStorage.getItem('sov_visits') || 'Unknown';

        // Chat Test
        document.getElementById('cmd').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') {
                let msg = this.value;
                this.value = '';
                document.getElementById('resp').innerText = 'Processing...';
                fetch('http://localhost:5000/api/chat', {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:msg})})
                .then(r => r.json()).then(d => {
                    document.getElementById('resp').innerText = '>> ' + d.response;
                });
            }
        });
    </script>
</body>
</html>
